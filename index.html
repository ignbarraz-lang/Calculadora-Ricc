<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora RIC Chile - IRVE</title>
    <style>
        :root { --primary: #2563eb; --success: #16a34a; --warning: #2563eb; --danger: #dc2626; --bg: #f8fafc; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--bg); padding: 15px; margin: 0; }
        .container { max-width: 600px; margin: auto; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); margin-bottom: 20px; border-top: 4px solid var(--primary); }
        h2 { color: #1e293b; margin-top: 0; font-size: 1.25rem; border-bottom: 1px solid #e2e8f0; padding-bottom: 10px; }
        label { display: block; margin: 12px 0 6px; font-weight: 600; font-size: 0.9rem; color: #475569; }
        input, select { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 1rem; box-sizing: border-box; }
        button { width: 100%; padding: 12px; margin-top: 15px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1rem; transition: opacity 0.2s; }
        .btn-calc { background-color: var(--primary); color: white; }
        .btn-ducto { background-color: var(--success); color: white; }
        .result { margin-top: 15px; padding: 12px; border-radius: 8px; font-weight: bold; border-left: 4px solid; }
        .recomendado { background: #f0fdf4; color: #166534; border-color: var(--success); }
        .excesivo { background: #eff6ff; color: #1e40af; border-color: var(--warning); }
        .falla { background: #fef2f2; color: #991b1b; border-color: var(--danger); }
        .area-info { background: #fffbeb; color: #92400e; border-color: #f59e0b; font-size: 0.85rem; }
        small { display: block; font-weight: normal; opacity: 0.8; margin-top: 4px; }
    </style>
</head>
<body>
<div class="container">
    <div class="card">
        <h2>üìè Ca√≠da de Tensi√≥n (RIC 04)</h2>
        <label>Distancia (m):</label> <input type="number" id="distancia" value="10">
        <label>Corriente (A):</label> <input type="number" id="corriente" value="16">
        <label>Secci√≥n (mm¬≤):</label> <input type="number" id="seccion" value="6">
        <button class="btn-calc" onclick="calcularCaida()">Calcular Ca√≠da</button>
        <div id="resCaida"></div>
    </div>

    <div class="card">
        <h2>üï≥Ô∏è Ductos EMT (RIC 07)</h2>
        <label>Cable RVK:</label>
        <select id="tipoCable">
            <option value="52.8">6mm¬≤ (8.2mm √ò)</option>
            <option value="81.7">10mm¬≤ (10.2mm √ò)</option>
            <option value="109.4">16mm¬≤ (11.8mm √ò)</option>
        </select>
        <label>Cantidad de cables:</label> <input type="number" id="cantidad" value="1">
        <label><input type="checkbox" id="utp"> Incluir UTP Cat6 (+32mm¬≤)</label>
        <button class="btn-ducto" onclick="calcularDuctos()">Analizar Ocupaci√≥n</button>
        <div id="resDucto"></div>
    </div>
</div>

<script>
function calcularCaida() {
    let l = parseFloat(document.getElementById('distancia').value);
    let i = parseFloat(document.getElementById('corriente').value);
    let s = parseFloat(document.getElementById('seccion').value);
    let dv = (2 * l * i * 0.018) / s;
    let porc = (dv / 220) * 100;
    let clase = porc <= 3 ? 'recomendado' : 'falla';
    document.getElementById('resCaida').innerHTML = `<div class="result ${clase}">P√©rdida: ${dv.toFixed(2)}V (${porc.toFixed(2)}%)<br>${porc <= 3 ? 'DENTRO DE NORMA ‚úÖ' : 'FUERA DE NORMA ‚ùå'}</div>`;
}

function calcularDuctos() {
    let areaUnit = parseFloat(document.getElementById('tipoCable').value);
    let cant = parseInt(document.getElementById('cantidad').value);
    let utp = document.getElementById('utp').checked;
    let areaTotal = (areaUnit * cant) + (utp ? 32 : 0);
    let nTotal = cant + (utp ? 1 : 0);
    let factor = nTotal === 1 ? 0.53 : (nTotal === 2 ? 0.31 : 0.40);
    let ductos = [{n:"32mm", d:28.4}, {n:"40mm", d:35.5}, {n:"50mm", d:45.3}];
    let html = `<div class="result area-info">√Årea Requerida: ${areaTotal.toFixed(1)} mm¬≤ | Ocupaci√≥n: ${factor*100}%</div>`;
    let yaRec = false;
    ductos.forEach(d => {
        let cap = ((Math.PI * Math.pow(d.d, 2)) / 4) * factor;
        if (cap >= areaTotal) {
            if (!yaRec) { html += `<div class="result recomendado">${d.n}: RECOMENDADO ‚úÖ</div>`; yaRec = True; }
            else { html += `<div class="result excesivo">${d.n}: EXCESIVO üîµ</div>`; }
        } else { html += `<div class="result falla">${d.n}: SOBRECARGADO ‚ùå<br><small>Capacidad m√°x: ${cap.toFixed(1)}mm¬≤</small></div>`; }
    });
    document.getElementById('resDucto').innerHTML = html;
}
</script>
</body>
</html>