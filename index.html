<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Eléctrica & RIC Chile</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navegación -->
    <nav class="navbar">
        <div class="nav-brand">
            <i class="fas fa-bolt"></i>
            <span>ElectriCalc Chile</span>
        </div>
        <ul class="nav-menu">
            <li><a href="#calculadora" class="active"><i class="fas fa-calculator"></i> Calculadoras</a></li>
            <li><a href="#ric"><i class="fas fa-book"></i> RIC Chile</a></li>
        </ul>
    </nav>

    <!-- Sección Calculadoras -->
    <section id="calculadora" class="section active">
        <div class="container">
            <h1><i class="fas fa-bolt"></i> Calculadoras Eléctricas</h1>
            
            <!-- Tabs de calculadoras -->
            <div class="calc-tabs">
                <button class="tab-btn active" onclick="showCalc('tension')">
                    <i class="fas fa-wave-square"></i> Caída de Tensión
                </button>
                <button class="tab-btn" onclick="showCalc('tuberia')">
                    <i class="fas fa-circle"></i> Diámetro Tubería
                </button>
            </div>

            <!-- Calculadora Caída de Tensión -->
            <div id="tension" class="calc-content active">
                <div class="card">
                    <h2>Calculadora de Caída de Tensión</h2>
                    <p class="subtitle">Según norma NCh Elec 4/2003</p>
                    
                    <div class="form-group">
                        <label>Tensión (V):</label>
                        <select id="tension-tipo">
                            <option value="220">220V Monofásico</option>
                            <option value="380">380V Trifásico</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Corriente (A):</label>
                        <input type="number" id="corriente" placeholder="Ej: 25" step="0.1">
                    </div>

                    <div class="form-group">
                        <label>Longitud (m):</label>
                        <input type="number" id="longitud" placeholder="Ej: 30" step="0.1">
                    </div>

                    <div class="form-group">
                        <label>Material:</label>
                        <select id="material">
                            <option value="56">Cobre (ρ=56)</option>
                            <option value="35">Aluminio (ρ=35)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Sección del conductor (mm²):</label>
                        <select id="seccion">
                            <option value="1.5">1.5 mm²</option>
                            <option value="2.5">2.5 mm²</option>
                            <option value="4">4 mm²</option>
                            <option value="6">6 mm²</option>
                            <option value="10">10 mm²</option>
                            <option value="16">16 mm²</option>
                            <option value="25">25 mm²</option>
                            <option value="35">35 mm²</option>
                            <option value="50">50 mm²</option>
                            <option value="70">70 mm²</option>
                            <option value="95">95 mm²</option>
                        </select>
                    </div>

                    <button onclick="calcularCaidaTension()" class="btn-calc">
                        <i class="fas fa-calculator"></i> Calcular
                    </button>

                    <div id="resultado-tension" class="resultado"></div>
                </div>
            </div>

            <!-- Calculadora Diámetro Tubería -->
            <div id="tuberia" class="calc-content">
                <div class="card">
                    <h2>Calculadora de Diámetro de Tubería</h2>
                    <p class="subtitle">Para cables eléctricos según RIC</p>

                    <div class="form-group">
                        <label>Tipo de cable:</label>
                        <select id="tipo-cable">
                            <option value="unipolar">Cable Unipolar</option>
                            <option value="multipolar">Cable Multipolar</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Cantidad de cables:</label>
                        <input type="number" id="cantidad-cables" placeholder="Ej: 3" min="1">
                    </div>

                    <div class="form-group">
                        <label>Sección de cada cable (mm²):</label>
                        <select id="seccion-cable">
                            <option value="1.5">1.5 mm²</option>
                            <option value="2.5">2.5 mm²</option>
                            <option value="4">4 mm²</option>
                            <option value="6">6 mm²</option>
                            <option value="10">10 mm²</option>
                            <option value="16">16 mm²</option>
                            <option value="25">25 mm²</option>
                            <option value="35">35 mm²</option>
                            <option value="50">50 mm²</option>
                            <option value="70">70 mm²</option>
                            <option value="95">95 mm²</option>
                            <option value="120">120 mm²</option>
                            <option value="150">150 mm²</option>
                            <option value="185">185 mm²</option>
                            <option value="240">240 mm²</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Ocupación máxima (%):</label>
                        <select id="ocupacion">
                            <option value="53">53% - 1 cable</option>
                            <option value="43">43% - 2 cables</option>
                            <option value="40" selected>40% - 3+ cables</option>
                        </select>
                    </div>

                    <button onclick="calcularTuberia()" class="btn-calc">
                        <i class="fas fa-calculator"></i> Calcular Diámetro
                    </button>

                    <div id="resultado-tuberia" class="resultado"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección RIC -->
    <section id="ric" class="section">
        <div class="container">
            <h1><i class="fas fa-book-open"></i> RIC - Reglamento de Instalaciones de Consumo</h1>
            
            <div class="ric-busqueda">
                <input type="text" id="ric-search" placeholder="Buscar artículo o palabra clave..." onkeyup="buscarRIC()">
                <i class="fas fa-search"></i>
            </div>

            <div class="ric-contenido" id="ric-contenido">
                <!-- Contenido cargado dinámicamente -->
            </div>
        </div>
    </section>

    <!-- Chatbot RIC -->
    <div class="chatbot-container">
        <div class="chatbot-bubble" onclick="toggleChat()">
            <i class="fas fa-robot"></i>
            <span>Asistente RIC</span>
        </div>
        
        <div class="chat-window" id="chat-window">
            <div class="chat-header">
                <i class="fas fa-robot"></i>
                <span>Asistente RIC Chile</span>
                <button onclick="toggleChat()" class="close-btn"><i class="fas fa-times"></i></button>
            </div>
            <div class="chat-messages" id="chat-messages">
                <div class="message bot">
                    ¡Hola! Soy tu asistente especializado en el RIC de Chile. 
                    Puedo responder preguntas sobre el Reglamento de Instalaciones de Consumo. 
                    ¿En qué puedo ayudarte?
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chat-input" placeholder="Escribe tu pregunta sobre RIC..." onkeypress="handleKeyPress(event)">
                <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <script src="js/ric-data.js"></script>
    <script src="js/calculadora.js"></script>
    <script src="js/chatbot.js"></script>
</body>
</html>
